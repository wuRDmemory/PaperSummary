# Hash 算法



## 出现原因

搜索一个东西在不在“数据库”中是一个常有的需求，对于数组而言，通过下标的方式访问数据并判断在不在是一个很好的想法，但是如果对象是一个任意长度的内容，这样的想法可能就不会那么容易实现，hash算法的诞生就主要解决这个问题。

## 主要作用和特点

hash算法的主要作用就是将任意长度的二进制串映射为固定长度长度的二进制串，一个好的hash算法应该具有以下特点：

1. 具有单向性，不能反向推导出来；
2. 对输入的数据比较敏感，即使一个bit变化也应该能够产生影响；
3. 散列的冲突要足够小；
4. 效率应该高，即使对于很长的内容也能快速进行hash值的计算；

## 主要用途

1. 安全标识：我们平时用的密码，一般都是位数不同的，此时如果将他们变为位数相同的内容将大大方便存储和管理；同时hash算法具有单向性，不能反向得知真实的密码；
2. 数据校验：比如我们下载电影，一般就是将一个很大的电影分为多个块，之后每块计算hash值并存在种子中，最终分块下载并校验，每个块都校验过了才算通过，最后将所有的块组合起来；
3. 散列键值：我们在用散列表的时候，一定要指定或者自定义hash函数来产生键值，该应用使用了hash值冲突较小的特点；
4. 唯一标识：现实中比如我们在一个大数据库中搜索数据，最差的方法就是一个一个对比，对比上了就存在，对比不上就不存在，这样的方法是很不好的，因为有时候搜索的东西是比较大的，但是如果通过hash函数来产生每个数据的唯一标示，则仅仅比较标识就知道数据是否存在了；
5. 负载均衡：将同一IP的请求汇集到一个后端服务器上，此时我们可以针对IP进行hash算法，之后对服务器数量进行取余，就可以保证来自同一IP的请求都发送到一个服务器上了；
6. 数据分片：数据分片的意思是有一个很大的数据在硬盘上，文件大小要远大于内存，但是我们期望对这些数据进行统计，因此期望通过多机协作的方法进行统计，过程就是计算数据的hash值，之后对机器数量取余得到机器的ID并放入，该ID的机器就统计这个数据的次数，最终汇集到一起；
7. 分布式存储：跟上面的类似，对数据取hash值并计算要存放的机器的ID，随后放入机器中。比较复杂的地方在于扩容，扩容的时候需要对所有的数据重新计算ID并分别放入新的ID机器中；一种解决方法**一致性Hash**，就是先将hash值的值域分为m区，之后再计算机器的ID，这样即使扩容了，也只对m个区进行移动，不用全部数据移动。