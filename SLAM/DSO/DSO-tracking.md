# DSO-tracking



## 写在前面

上一篇记录了DSO的初始化阶段，本文主要记录下对于新帧的追踪，即tracking，整个部分其实不是很难，主要的思路也简单，就是由粗到细的进行光度误差的最小化，以此来计算位姿。



## 特点

虽然都是最小化光度误差，这里先列出DSO做的很不同的地方：

1. 放弃使用了像素块的方法，这个个人深有感触，一般而言虽然像素块的大小不大，但是耐不住点多啊，多数情况下如果用像素块的话这个地方就变成了十分花费时间；
2. 当某一层的初始位姿不好的时候，DSO并不放弃"治疗"，反而会给足了机会去优化，但是如果优化出来的结果与阈值差距太大，那么就直接放弃了；
3. 作者假设了5种运动模型：匀速、倍速、半速、零速以及没有运动；
4. 与此同时，作者假定了有26×3种旋转情况（四元数的26种旋转情况，3个比较小的角度），作者认为是在丢失的情况下，这样的方法会十分有用，如果没有丢失应该前五种假设就够了；



## 深入探讨

整个跟踪函数仅有一个，即代码中的trackNewCoarse函数，该函数主要做了两件事：

1. 准备相应的运动初值，详细来说就是五种运动假设和N种旋转假设；
2. 对每一个初值进行L-M迭代，求得最佳的位姿；

下面分两部分来说明：



### 准备运动初值

文字在这个部分显得些许苍白，这里配上一张图会比较清晰：

